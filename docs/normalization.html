<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
        <title></title><style type="text/css">body{
 font-family: helvetica;
 color: #222;
 padding: 0px 50px 50px 50px;
}
ul {
                list-style-type: none;
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
            li {
                float: left;
            }
            li a {
                display: block;
                color: black;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
            }
            p a {
                color: #63b562;
                text-decoration: none;
            }
</style></head><body><ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="general_structure.html">General Protocol Structure</a></li>
            <li><a href="dilution.html">Dilution</a></li>
            <li><a href="pooling.html">Pooling</a></li>
            <li><a class="active" href="normalization.html">Normalization</a></li>
            <li><a href="dna_extraction_purification.html">DNA Extraction & Purification</a></li>
            <li style="float:right;"><a href="https://github.com/reyamiller/Otto">GitHub</a></li>
        </ul><h1>Normalization</h1><p>The <a class="reference external" href="protocols/normalization.py">Normalization</a> protocol normalizes the amount of material in the wells of a plate based on values that are pre-specified by the user.</p><p>The easiest way to input these values is to copy and paste from a spreadsheet. See <a class="reference external" href="https://docs.google.com/spreadsheets/d/1K7OXYfy0i2oJgIokcdIegjBVeeBMqR_-SODV961FI2k/edit?usp=sharing">this</a> link for a template.</p><pre><code class="python">water_volume_data = """
        1   2       3       4       5       6       7       8       9       10      11      12
A   12.4    11.6
B   11.7    10.7
C   12.2    10.5
D   12.0
E   12.4
F   12.3
G   12.4
H   12.2
"""
water_volume_data = water_volume_data.replace('\t', ',')

dna_volume_data = """
        1   2       3       4       5       6       7       8       9       10      11      12
A   0.6     1.4
B   1.3     2.4
C   0.8     2.5
D   1.0
E   0.6
F   0.7
G   0.6
H   0.9
"""
dna_volume_data = dna_volume_data.replace('\t', ',')</code></pre><p>A water plate is defined based on <code>water_volume_data</code>. The protocol uses <code>csv</code> to read the data.</p><pre><code class="python">tube_rack = protocol.load_labware("opentrons_24_tuberack_eppendorf_1.5ml_safelock_snapcap", 5)
water_plate = protocol.load_labware("opentrons_96_wellplate_200ul_pcr_full_skirt", 3)
water = protocol.define_liquid(
    name="Water",
    description="The liquid being used to dilute the sample.",
    display_color="#0051FF"
)
tube_rack.load_liquid(
    wells=["A1"],
    volume=150,
    liquid=water
)

csv_water_volume = water_volume_data.splitlines()[1:]
water_volume_reader = csv.DictReader(csv_water_volume)
wells_used = []
water_volumes = {}
for row in water_volume_reader:
    r = row[""]
    for i in range(1,13):
        new_key = r + (str) (i)
        row[new_key] = row.pop(f'{i}')
    del row[""]
    keys = list(row.keys())
    not_blank = []
    for key in keys:
        if row[key] != '':
            not_blank.append(key)
    wells_used.extend(not_blank)
    water_volumes |= row

water_plate.load_liquid(
    wells=wells_used,
    volume=150,
    liquid=water
)</code></pre><p>A similar process is used to define the sample plate.</p><p>The robot first adds the specified volumes of water to the corresponding wells of the water plate. Note that this step only uses one pipette tip.</p><pre><code class="python">left_pipette.pick_up_tip()
for well in wells_used:
    left_pipette.transfer((float) (water_volumes[well]), tube_rack["A1"], water_plate[well], new_tip="never", blow_out=True, blowout_location="destination well")
left_pipette.drop_tip()</code></pre><p>Then the specified volumes of sample are transferred to the corresponding wells of the water plate.</p><pre><code class="python">for well in wells_used:
    left_pipette.transfer((float) (dna_volumes[well]), dna_plate[well], water_plate[well], blow_out=True, blowout_location="destination well")</code></pre></body></html>